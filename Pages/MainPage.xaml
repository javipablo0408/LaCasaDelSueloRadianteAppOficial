<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LaCasaDelSueloRadianteApp.MainPage"
             Title=""
             BackgroundColor="{StaticResource Gray50}">
    <ContentPage.Content>
        <Grid RowDefinitions="Auto,*">
            <!-- Header -->
            <VerticalStackLayout Grid.Row="0" Padding="20,16,20,0" Spacing="8">
                <Label Text="Productos Profesionales" 
                       Style="{StaticResource PageTitle}" />
                <Label Text="Equipamiento especializado para instalaciones" 
                       Style="{StaticResource BodyText}"
                       HorizontalOptions="Center" />
            </VerticalStackLayout>
            
            <!-- Products Grid -->
            <CollectionView Grid.Row="1"
                            ItemsSource="{Binding Productos}" 
                            SelectionMode="None"
                            Margin="16,8,16,16">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical" 
                                     Span="2" 
                                     VerticalItemSpacing="16" 
                                     HorizontalItemSpacing="16" />
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Style="{StaticResource CardFrame}" 
                               Padding="16"
                               Margin="0">
                            <VerticalStackLayout Spacing="12">
                                <!-- Imagen del producto -->
                                <Border BackgroundColor="{StaticResource Gray100}"
                                        StrokeShape="RoundRectangle 8"
                                        Stroke="Transparent"
                                        HeightRequest="120"
                                        WidthRequest="120"
                                        HorizontalOptions="Center">
                                    <Image Source="{Binding ImagenUrl}" 
                                           Aspect="AspectFit"
                                           Margin="8" />
                                </Border>
                                
                                <!-- Nombre del producto -->
                                <Label Text="{Binding Nombre}" 
                                       FontAttributes="Bold" 
                                       FontSize="16" 
                                       HorizontalOptions="Center"
                                       HorizontalTextAlignment="Center"
                                       MaxLines="2"
                                       TextColor="{StaticResource Gray900}" />
                               
                                <!-- Botón para añadir al carrito -->
                                <Button Text="Ver Producto"
                                        Style="{StaticResource PrimaryButton}"
                                        FontSize="14"
                                        HeightRequest="40"
                                        Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.ComprarCommand}"
                                        CommandParameter="{Binding}" />     
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </ContentPage.Content>
</ContentPage>